# ================================
# 初春图床系统 / OneImg
# Vue 3 + Go 图床管理系统
# ================================

# --- 基础信息 / Basic Information ---
local app_id="oneimg"
local app_name="OneImg"
local app_text="基于Vue3+Go的现代化图床系统，支持POW验证、剪贴板上传等高级功能"
local app_url="https://github.com/onexru/oneimg"
local docker_name="oneimg"
local docker_port="8080"
local app_size="1"

# --- 核心逻辑 / Core Logic ---
docker_app_install() {

    echo "开始安装 初春图床系统 (OneImg)..."
    mkdir -p /home/docker/oneimg && cd /home/docker/oneimg || exit 1
    curl -L -o docker-compose.yml \
        "${gh_proxy}raw.githubusercontent.com/onexru/oneimg/main/docker-compose.yml"
    sed -i "s/8080:8080/${docker_port}:8080/g" docker-compose.yml
    docker compose up -d
    echo "初春图床系统 安装完成"
    check_docker_app_ip
}

docker_app_update() {
    echo "更新 初春图床系统..."
    cd /home/docker/oneimg
    docker compose pull
    docker compose up -d

}

docker_app_uninstall() {
    echo "卸载 初春图床系统..."
    cd /home/docker/oneimg
    docker compose down --rmi all
    rm -rf /home/docker/oneimg
}

# --- 注册 (必须包含) / Registration ---
docker_app_plus
